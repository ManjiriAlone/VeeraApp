<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Classroom Temperature Monitoring System</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Comic Sans MS', 'Poppins', sans-serif;
    }

    body {
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: linear-gradient(180deg, #ffb347, #ffffff);
      overflow: hidden;
      text-align: center;
      color: #333;
    }

    /* Top Navigation Bar */
    .top-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 25px;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .nav-icons {
      display: flex;
      gap: 12px;
    }

    .nav-icons img {
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .nav-icons img:hover {
      transform: scale(1.1);
      filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.3));
    }

    .heading {
      flex: 1;
      font-size: 1.8rem;
      font-weight: bold;
      background: linear-gradient(135deg, #4caf50, #81c784);
      color: white;
      padding: 8px 18px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
      margin-left: 15px;
    }

    /* Main Content */
    .content {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 40px;
      padding: 20px;
    }

    .board {
      width: 300px;
      border-radius: 15px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.15);
      transition: 0.3s ease;
    }

    .board:hover {
      transform: scale(1.03);
    }

    .item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(255,255,255,0.9);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
      transition: 0.3s ease;
    }

    .item:hover {
      transform: translateY(-5px);
    }

    .item img {
      width: 140px;
      margin-bottom: 10px;
    }

    .item p {
      font-weight: bold;
      margin-bottom: 10px;
      color: #444;
    }

    .buttons {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .btn {
      padding: 8px 14px;
      border-radius: 20px;
      border: none;
      font-size: 0.9rem;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
      box-shadow: 0 3px 10px rgba(0,0,0,0.15);
      transition: all 0.2s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-on { background: linear-gradient(135deg, #43c743, #2aa82a); }
    .btn-off { background: linear-gradient(135deg, #e63939, #cc0000); }

    /* Threshold controls */
    .threshold-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
    }

    .threshold-controls input {
      width: 100px;
      padding: 6px;
      border-radius: 8px;
      border: 2px solid #aaa;
      text-align: center;
      font-weight: bold;
      outline: none;
      transition: 0.3s;
    }

    .threshold-controls input:focus {
      border-color: #4caf50;
    }

    .threshold-btns {
      display: flex;
      gap: 10px;
    }

    .btn-threshold {
      padding: 6px 12px;
      border-radius: 20px;
      border: none;
      font-size: 0.85rem;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
      box-shadow: 0 3px 10px rgba(0,0,0,0.15);
      transition: 0.2s;
    }

    .btn-set { background: linear-gradient(135deg, #ff9800, #f57c00); }
    .btn-reset { background: linear-gradient(135deg, #607d8b, #455a64); }

    .btn-threshold:hover {
      transform: translateY(-2px);
    }

    /* Lion Section */
    .lion-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .lion {
      width: 200px;
      transition: 0.3s;
    }

    .typewriter {
      font-size: 1.1rem;
      color: #333;
      font-weight: bold;
      max-width: 260px;
      min-height: 50px;
      white-space: nowrap;
      border-right: 3px solid #333;
      overflow: hidden;
      animation: typing 4s steps(30, end) infinite alternate, blink 0.7s infinite;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    /* Next Experiment */
    .next-btn {
      margin: 20px auto;
      padding: 12px 30px;
      font-size: 1rem;
      font-weight: bold;
      background: linear-gradient(135deg, #8e24aa, #ab47bc);
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: 0.3s;
    }

    .next-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    @media (max-width: 768px) {
      .content {
        flex-direction: column;
      }
      .board {
        width: 80%;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <div class="top-nav">
    <div class="nav-icons">
      <img src="../../assets/icons/home.png" alt="Home" onclick="goHome()">
      <img src="../../assets/icons/achievements.png" alt="Achievements" onclick="goAchievements()">
      <img src="../../assets/icons/logout.png" alt="Back" onclick="goBack()">
    </div>
    <div class="heading">Classroom Temperature Monitoring System</div>
  </div>

  <!-- Main Section -->
  <div class="content">
    <img src="../../assets/images/class.png" alt="Board" class="board">

    <div class="item">
      <img src="../../assets/images/dht11.png" alt="DHT11 Sensor">
      <p>Temperature & Humidity Sensor</p>

      <div class="buttons">
        <button class="btn btn-on" onclick="toggleDevice('ON')">ON</button>
        <button class="btn btn-off" onclick="toggleDevice('OFF')">OFF</button>
      </div>

      <div class="threshold-controls">
        <input type="number" id="thresholdValue" placeholder="¬∞C" min="0" max="100">
        <div class="threshold-btns">
          <button class="btn-threshold btn-set" onclick="setThreshold()">Set</button>
          <button class="btn-threshold btn-reset" onclick="resetThreshold()">Reset</button>
        </div>
      </div>
    </div>

    <div class="lion-container">
      <img src="../../assets/images/lion.gif" alt="Lion Mascot" class="lion" id="lion">
      <div class="typewriter" id="lionText"> Hello students!
Imagine a classroom that always stays comfortable ‚Äî never too hot, never too cold.
With this experiment, your Veera Kit will act like a mini weather station!
The temperature sensor will keep track of how warm your class is.
This data helps us decide when to turn fans or AC ON.
Ready to make your classroom smart and comfy? Let‚Äôs monitor the temperature! ü¶Å</div>
    </div>
  </div>

  <button class="next-btn" onclick="goNext()">Next Experiment ‚ûú</button>

  <!-- Audio -->
  <audio id="voice" autoplay>
    <source src="../../assets/voice/VOICE OVER PAGE 17.mp3" type="audio/mpeg">
  </audio>

  <script>
    const audio = document.getElementById("voice");
    const lion = document.getElementById("lion");

    // Audio autoplay and fallback
    audio.play().then(() => {
      lion.src = "../../assets/images/lion.gif";
    }).catch(() => {
      document.body.addEventListener("click", () => {
        audio.play();
        lion.src = "../../assets/images/lion.gif";
      }, { once: true });
    });

    audio.addEventListener("ended", () => {
      lion.src = "../../assets/images/lion.png";
    });

    // Threshold controls
    function setThreshold() {
      const value = document.getElementById("thresholdValue").value;
      if (value === "") {
        alert("Please enter a temperature threshold!");
        return;
      }
      alert(`Threshold set to ${value}¬∞C`);
      if (window.serialAPI && window.serialAPI.send) {
        window.serialAPI.send(`SET_THRESHOLD:${value}`);
      }
    }

    function resetThreshold() {
      document.getElementById("thresholdValue").value = "";
      alert("Threshold reset!");
      if (window.serialAPI && window.serialAPI.send) {
        window.serialAPI.send("RESET_THRESHOLD");
      }
    }

    function toggleDevice(state) {
      alert(`Device turned ${state}`);
      if (window.serialAPI && window.serialAPI.send) {
        window.serialAPI.send(`DEVICE_${state}`);
      }
    }

    // Navigation
    function goNext() { window.location.href = "./C5E7.html"; }
    function goHome() { window.location.href = "../welcome.html"; }
    function goAchievements() { window.location.href = "page4.html"; }
    function goBack() { window.history.back(); }
  </script>
  <script src="../serial-handler.js"></script>
    <script src="SerialManager.js"></script>
  <script src="./backend/experimentControls.js"></script>
  <script src="../backend/renderer.js"></script>

</body>
</html>
